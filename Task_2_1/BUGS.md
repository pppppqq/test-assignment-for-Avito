Документ содержит баг-репорты по багам, найденным при составлении тест-кейсов и непосредственном тестировании API.

## **Приоритезация багов**

Приоритеты багам были выставлены по следующей логике:
- Высокий (high): Назначается дефектам, которые блокируют или искажают базовую функциональность. Ошибка не позволяет корректно сохранить объект с валидными данными (значение 0), что нарушает один из основных сценариев использования системы — публикацию нового объявления. Это прямая потеря данных и функциональности.

- Средний (medium): Назначается дефектам, которые не нарушают основную функциональность, но ухудшают взаимодействие с API. Система в целом работает (создает, удаляет объекты), но возвращает некорректные, неинформативные или вводящие в заблуждение ответы. Это затрудняет отладку для разработчиков, использующих API, и может маскировать реальные проблемы.

## Общая информация о сервисе
- RESTful API сервис
- BaseUrl: https://qa-internship.avito.com

## 1. Неверная ошибка при передаче статистики со значением 0

**Описание**: При отправке POST-запроса на создание объявления с корректными значениями статистики, равными 0, API ошибочно считает поля статистики отсутствующими и возвращает сообщение "поле likes обязательно".

Значение 0 является валидным: нулевое количество лайков, просмотров и контактов - корректная ситуация для нового объявления.

Таким образом, ошибка валидации — ложноположительная.

**Шаги по воспроизведению**:
1. Отправить POST-запрос на `BaseUrl/api/1/item` с телом:
    ```json
    {
    "sellerID": 4962657,
    "name": "test",
    "price": 500,
    "statistics": {
        "likes": 0,
        "viewCount": 0,
        "contacts": 0
      }
    }
    ```

**Ожидаемый результат**:\
Status code: 200\
Объявление успешно сохраняется

**Фактический результат**:\
Ответ сервера:
```json
{
    "result": {
        "message": "поле likes обязательно",
        "messages": {}
    },
    "status": "400"
}
```

**Приоритет**: Высокий

## 2. Некорректное сообщение об ошибке при передаче невалидного значения в поле `sellerID`

**Описание**: При отправке POST-запроса с невалидным значением поля `sellerID` (строка вместо числа) API возвращает пустое `message` и `status`: "не передано тело объявления" (вместо статус кода ошибки).

Это некорректное поведение: тело запроса фактически передано, а ошибка должна указываться на неправильный тип данных поля `sellerID`.

**Шаги по воспроизведению**:
1. Отправить POST-запрос на `BaseUrl/api/1/item` с телом:
    ```json
    {
    "sellerID": "4962657",
    "name": "test",
    "price": 500,
    "statistics": {
        "likes": 0,
        "viewCount": 0,
        "contacts": 0
      }
    }
    ```

**Ожидаемый результат**:\
Status code: 400\
Сообщение об ошибки валидации

**Фактический результат**:\
Ответ сервера:
```json
{
    "result": {
        "message": "",
        "messages": {}
    },
    "status": "не передано тело объявления"
}
```

**Приоритет**: Средний

## 3. Неконсистентность поля `sellerId`

**Описание**: При отправке POST-запроса наименование поля с идентификатором пользователя `sellerID`, во всех остальных запросах к API и ответах от сервера - `sellerId` (ID != Id).

**Шаги по воспроизведению**:
1. Отправить POST-запрос на `BaseUrl/api/1/item` с телом:
    ```json
    {
    "sellerID": "4962657",
    "name": "test",
    "price": 500,
    "statistics": {
        "likes": 0,
        "viewCount": 0,
        "contacts": 0
      }
    }
    ```

**Ожидаемый результат**:
```json
{
  "id": "<string>",
  "sellerID": 4962657,
  "name": "test",
  "price": 500,
  "statistics": {
    "likes": 100,
    "viewCount": 100,
    "contacts": 100
  },
  "createdAt": "<string>"
}
```
Где id - идентификатор объявления, 
createdAt - временная метка с датой сохранения объявления.

**Фактический результат**:\
Ответ сервера:
```json
{
  "id": "<string>",
  "sellerId": 4962657,
  "name": "test",
  "price": 500,
  "statistics": {
    "likes": 100,
    "viewCount": 100,
    "contacts": 100
  },
  "createdAt": "<string>"
}
```

**Приоритет**: Низкий

## 4. Нет вывода сообщения об успешном удалении объекта

**Описание**: После успешного удаления объявления API возвращает статус 200, однако в теле ответа отсутствует сообщение, подтверждающее успешное выполнение операции.

**Шаги по воспроизведению**:
1. Создать тестовое объявление, узнать его `id`
2. Отправить DELETE-запрос на `BaseUrl/api/2/item/{id}`

**Ожидаемый результат**:\
Status code: 200\
Сообщение об успешном удалении объявления

**Фактический результат**:\
Status code: 200\
Тело ответа пустое

**Приоритет**: Средний

## 5. Некоректнон тело ответа сервера при попытке удалить несуществующее объявление

**Описание**: При попытке удалить несуществующее объявление, API в теле ответа возвращает пустое сообщение и некорректный статус, хотя статус код ответа соответствует ожидаемому.

**Шаги по воспроизведению**:
1. Отправить DELETE-запрос на `BaseUrl/api/2/item/{id}` с несуществующим UUID id

**Ожидаемый результат**:\
Status code: 404\
Сообщение о том, что объявления не существует

**Фактический результат**:\
Ответ сервера:
```json
{
    "result": {
        "message": "",
        "messages": null
    },
    "status": "500"
}
```

**Приоритет**: Средний

## 6. Некорректное тело ответа сервера при успешном сохранении объявления

**Описание**: При успешном создании объявления через POST запрос API возвращает текстовое сообщение в формате строки вместо ожидаемого структурированного JSON объекта с данными созданного объявления.

1. Отправить POST-запрос на `BaseUrl/api/1/item` с телом:
  ```json
  {
    "sellerID": 4962657,
    "name": "test",
    "price": 500,
    "statistics": {
      "likes": 100,
      "viewCount": 100,
      "contacts": 100
    }
  }
  ```

**Ожидаемый результат**:\
Status code: 200
```json
{
  "id": "<string>",
  "sellerId": 4962657,
  "name": "test",
  "price": 500,
  "statistics": {
    "likes": 100,
    "viewCount": 100,
    "contacts": 100
  },
  "createdAt": "<string>"
}
```
Где id - идентификатор объявления, 
createdAt - временная метка с датой сохранения объявления.

**Фактический результат**:\
Ответ сервера:
```json
{
    "status": "Сохранили объявление - 215366d6-c89e-4f2b-a208-da5015a5826c"
}
```

**Приоритет**: Высокий

## 7. Неверный статус кода ответа от сервера при попытке посмотреть статистику по невалидному `id`

**Описание**: При попытке посмотреть статистику по объявлению с невалидным id приходит неверный статус код от сервера, хотя в теле ответа указан корректный статус.

**Шаги по воспроизведению**:
1. Отправить GET-запрос на `BaseUrl/api/2/statistic/{invalid_id}`

**Ожидаемый результат**:\
Status code: 400\
Сообщение об ошибке валидации

**Фактический результат**:\
Status code: 404\
Ответ сервера:
```json
{
    "result": {
        "message": "передан некорректный идентификатор объявления",
        "messages": null
    },
    "status": "400"
}
```

**Приоритет**: Средний

## 8. Некорректное тело ответа сервера при получении статистики по существующему `id`

**Описание**: При попытке посмотреть статистику по существующему объявлению приходит неверное тело ответа от сервера.

**Шаги по воспроизведению**:
1. Отправить GET-запрос на `BaseUrl/api/2/statistic/{id}`

**Ожидаемый результат**:\
Status code: 200\
Ответ сервера:
```json
{
  {
    "likes": "<integer>",
    "viewCount": "<integer>",
    "contacts": "<integer>"
  }
}
```

**Фактический результат**:\
Status code: 200\
Ответ сервера:
```json
[
  {
    "likes": "<integer>",
    "viewCount": "<integer>",
    "contacts": "<integer>"
  }
]
```

**Приоритет**: Высокий
