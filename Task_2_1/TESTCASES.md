# Тест-кейсы для проверки API микросервиса объявлений
Документ содержит набор тест-кейсов, предназначенных для проверки корректности работы API микросервиса объявлений.
Цель тестирования - убедиться, что все эндпоинты сервиса функционируют согласно требованиям, корректно обрабатывают входящие данные и возвращают ожидаемые ответы в различных сценариях.

Для удобства все тесты разделены на положительные и негативные.

# Общая информация о сервисе
- RESTful API сервис
- BaseUrl: https://qa-internship.avito.com

# 1. Сохранение объявления

## Позитивные тесты

### [TC001] Успешное сохранение объявления с валидными данными

**Предподготовка**: Не требуется

**Шаги по воспроизведению**:
1. Отправить POST-запрос на `BaseUrl/api/1/item` с телом:
  ```json
  {
    "sellerID": 4962657,
    "name": "test",
    "price": 500,
    "statistics": {
      "likes": 100,
      "viewCount": 100,
      "contacts": 100
    }
  }
  ```
**Ожидаемый результат**:\
Status code: 200
```json
{
  "id": "<string>",
  "sellerId": 4962657,
  "name": "test",
  "price": 500,
  "statistics": {
    "likes": 100,
    "viewCount": 100,
    "contacts": 100
  },
  "createdAt": "<string>"
}
```
Где id - идентификатор объявления, 
createdAt - временная метка с датой сохранения объявления.

## Негативные тесты

### [TC002] Попытка сохранения объявления без указания обязательного поля

**Предподготовка**: Не требуется

**Шаги по воспроизведению**:
1. Отправить POST-запрос на BaseUrl/api/1/item с телом, в котором отсутствует одно из обязательных полей

**Ожидаемый результат**:
Status code: 400\
Сообщение о том, что отсутствует обязательное поле

### [TC003] Попытка сохранения объявления с невалидными данными

**Предподготовка**: Не требуется

**Шаги по воспроизведению**:
1. Отправить POST-запрос на BaseUrl/api/1/item с телом, в котором поле имеет невалидный тип

**Пример невалидного запроса**:
```json
{
  "sellerId": "4962657",
  "name": "test",
  "price": 1000,
  "statistics": {
    "likes": 5,
    "viewCount": 150,
    "contacts": 10
    }
}
```
**Ожидаемый результат**:\
Status code: 400\
Сообщение о том, что данные невалидны

# 2. Получение объявления по id

## Позитивные тесты

### [TC004] Успешное получение существующего объявления

**Предподготовка**: Создание тестового объявления для получения его id

**Шаги по воспроизведению**:
1. Отправить GET-запрос на `BaseUrl/api/1/item/{id}`

**Ожидаемый результат**:\
Status code: 200
```json
{
  "id": "<string>",
  "sellerId": "<integer>",
  "name": "<string>",
  "price": "<integer>",
  "statistics": {
    "likes": "<integer>",
    "viewCount": "<integer>",
    "contacts": "<integer>"
  },
  "createdAt": "<string>"
}
```

## Негатиыные тесты

### [TC005] Получение несуществующего объявления

**Предподготовка**: Не требуется

**Шаги по воспроизведению**:
1. Отправить GET-запрос на `BaseUrl/api/1/item/{non_existent_id}`

**Ожидаемый результат**:\
Status code: 404\
Сообщение о том, что объявления с таким id не существует.

### [TC006] Получение объявления с невалидным id

**Предподготовка**: Не требуется

**Шаги по воспроизведению**:
1. Отправить GET-запрос на `BaseUrl/api/1/item/{invalid_id}`

**Ожидаемый результат**:\
Status code: 400\
Сообщение об ошибке валидации.

# 3. Получение всех объявления пользователя

## Позитивные тесты

### [TC007] Успешное получение объявлений существующего пользователя

**Предподготовка**: Создание хотя бы 1 объявления у пользователя

**Шаги по воспроизведению**:
1. Отправить GET-запрос на `BaseUrl/api/1/{sellerID}/item`

**Ожидаемый результат**:\
Status code: 200\
Список с объявлениями такой структуры:
```json
[
  {
    "id": "<string>",
    "sellerId": "<integer>",
    "name": "<string>",
    "price": "<integer>",
    "statistics": {
      "likes": "<integer>",
      "viewCount": "<integer>",
      "contacts": "<integer>"
    },
    "createdAt": "<string>"
  },
  ...
]
```
Все объявления в массиве имеют sellerId равный запрошенному sellerID.
Количество объявлений соответствует ожидаемому.

### [TC008] Получение объявлений пользователя без объявлений

**Предподготовка**: Знать id пользователя

**Шаги по воспроизведению**:
1. Отправить GET-запрос на `BaseUrl/api/1/{sellerID}/item`

**Ожидаемый результат**:\
Status code: 200\
Пустой массив

## Негативные тесты

### [TC009] Получение объявлений несуществующего пользователя

**Предподготовка**: Не требуется

**Шаги по воспроизведению**:
1. Отправить GET-запрос на `BaseUrl/api/1/{non_existent_sellerID}/item`

**Ожидаемый результат**:\
Status code: 404\
Сообщение о том, что такого пользователя не существует

### [TC010] Получение объявлений пользователя с указанием невалидного sellerID

**Предподготовка**: Не требуется

**Шаги по воспроизведению**:
1. Отправить GET-запрос на `BaseUrl/api/1/{invalid_sellerID}/item`

**Ожидаемый результат**:\
Status code: 400\
Сообщение об ошибке валидации

# 4. Получение статистики по объявлению

## Позитивные тесты

### [TC011] Успешное получение статистики существующего объявления (API v2)

**Предподготовка**: Создано тестовое объявление

**Шаги по воспроизведению**:
1. Отправить GET-запрос на `BaseUrl/api/2/statistic/{id}`

**Ожидаемый результат**:\
Status code: 200
```json
{
  "likes": "<integer>",
  "viewCount": "<integer>",
  "contacts": "<integer>"
}
```
## Негативные тесты

### [TC012] Попытка получения статистики для несуществующего объявления (API v2)

**Предподготовка**: Не требуется

**Шаги по воспроизведению**:
1. Отправить GET-запрос на `BaseUrl/api/2/statistic/{non_existent_id}`

**Ожидаемый результат**:\
Status code: 404\
Сообщение о том, что объявления с таким id не существует

### [TC013] Попытка получения статистики для существующего объявления с указанием невалидного id (API v2)

**Предподготовка**: Не требуется

**Шаги по воспроизведению**:
1. Отправить GET-запрос на `BaseUrl/api/2/statistic/{invalid_id}`

**Ожидаемый результат**:\
Status code: 400\
Сообщение об ошибке валидации

# 5. Удаление объявления

## Позитивные тесты

### [TC014] Успешное удаление существующего объявления (API v2)

**Предподготовка**: Создано тестовое объявление

**Шаги по воспроизведению**:
1. Отправить DELETE-запрос на `BaseUrl/api/2/item/{id}`

**Ожидаемый результат**:\
Status code: 200\
Сообщение об успешном удалении объявления

## Негативные тесты

### [TC015] Попытка удаления несуществующего объявления (API v2)

**Предподготовка**: Не требуется

**Шаги по воспроизведению**:
1. Отправить DELETE-запрос на `BaseUrl/api/2/item/{non_existent_id}`

**Ожидаемый результат**:\
Status code: 404\
Сообщение о том, что объявления не существует

### [TC016] Попытка удаления существующего объявления с указанием невалидного id (API v2)

**Предподготовка**: Не требуется

**Шаги по воспроизведению**:
1. Отправить DELETE-запрос на `BaseUrl/api/2/item/{invalid_id}`

**Ожидаемый результат**:\
Status code: 400\
Сообщение об ошибке валидации